(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{310:function(a,n,e){"use strict";e.r(n);var t=e(38),r=Object(t.a)({},function(){var a=this,n=a.$createElement,e=a._self._c||n;return e("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[e("h1",{attrs:{id:"centos下使用docker安装lnmp"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#centos下使用docker安装lnmp","aria-hidden":"true"}},[a._v("#")]),a._v(" Centos下使用docker安装LNMP")]),a._v(" "),e("h2",{attrs:{id:"安装docker"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装docker","aria-hidden":"true"}},[a._v("#")]),a._v(" 安装docker")]),a._v(" "),e("p",[e("code",[a._v("yum install -y docker")])]),a._v(" "),e("p",[a._v("启动docker服务并设置为开机自启动")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("systemctl start docker\nsystemctl enable docker\n")])])]),e("h2",{attrs:{id:"安装mysql-docker"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装mysql-docker","aria-hidden":"true"}},[a._v("#")]),a._v(" 安装mysql docker")]),a._v(" "),e("p",[e("code",[a._v("docker pull mysql")])]),a._v(" "),e("p",[a._v("配置")]),a._v(" "),e("p",[e("code",[a._v("docker run -d -p 3306:3306 -e MYSQL_ROOT_PASSWORD=123456 --name cyt_mysql mysql")])]),a._v(" "),e("p",[a._v("说明")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("-p:端口映射，映射容器的3306\n后面就是密码和名称\n")])])]),e("h2",{attrs:{id:"安装php"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装php","aria-hidden":"true"}},[a._v("#")]),a._v(" 安装php")]),a._v(" "),e("p",[e("code",[a._v("docker pull php:7.2-fpm")])]),a._v(" "),e("p",[a._v("创建 PHPfpm 容器")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("docker run -d -v /data/nginx/www:/var/www/html -p 9000:9000 --link lph_mysql:mysql --name lph_phpfpm php:7.2-fpm \n")])])]),e("p",[a._v("命令参数解释：")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("-v 前面是主机的目录映射容器的目录\nlink：挂上msyql\n")])])]),e("h2",{attrs:{id:"安装nginx"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装nginx","aria-hidden":"true"}},[a._v("#")]),a._v(" 安装nginx")]),a._v(" "),e("p",[e("code",[a._v("docker pull ngixn")])]),a._v(" "),e("p",[a._v("挂载配置文件，在centos中")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("mkdir -p /data/nginx/conf\nmkdir -p /data/nginx/conf.d\nmkdir -p /data/nginx/www\nmkdir -p /data/nginx/www/html\nmkdir -p /data/nginx/logs\nmkdir -p /data/nginx/ssl\n")])])]),e("p",[a._v("在"),e("code",[a._v("/data/nginx/conf/")]),a._v("新建"),e("code",[a._v("nginx.conf")]),a._v("文件，并拷贝出docker中nginx的对应配置信息")]),a._v(" "),e("p",[a._v("在"),e("code",[a._v("/data/nginx/conf.d/")]),a._v("新建"),e("code",[a._v("ndefault.conf")]),a._v("文件，并拷贝出docker中nginx的对应配置信息")]),a._v(" "),e("p",[a._v("执行以下命令启动容器")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("docker run --detach \\\n        --link lph_phpfpm:phpfpm \\\n        --name lph_nginx \\\n        -p 443:443\\\n        -p 80:80 \\\n        -v /data/nginx/www:/usr/share/nginx/html:rw\\\n        -v /data/nginx/conf/nginx.conf:/etc/nginx/nginx.conf:rw\\\n        -v /data/nginx/conf.d/default.conf:/etc/nginx/conf.d/default.conf:rw\\\n        -v /data/nginx/logs:/var/log/nginx/:rw\\\n        -v /data/nginx/ssl:/etc/nginx/ssl:rw\\\n        -d nginx\n")])])]),e("h2",{attrs:{id:"进入docker镜像"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#进入docker镜像","aria-hidden":"true"}},[a._v("#")]),a._v(" 进入docker镜像")]),a._v(" "),e("p",[e("code",[a._v("docker run -i -t nginx /bin/bash")])]),a._v(" "),e("h2",{attrs:{id:"docker基本命令"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#docker基本命令","aria-hidden":"true"}},[a._v("#")]),a._v(" docker基本命令")]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("$ docker ps // 查看所有正在运行容器\n$ docker stop containerId // containerId 是容器的ID\n\n$ docker ps -a // 查看所有容器\n$ docker ps -a -q // 查看所有容器ID\n\n$ docker stop $(docker ps -a -q) //  stop停止所有容器\n$ docker  rm $(docker ps -a -q) //   remove删除所有容器\n\n")])])]),e("h2",{attrs:{id:"注意"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#注意","aria-hidden":"true"}},[a._v("#")]),a._v(" 注意")]),a._v(" "),e("p",[a._v("此方式只适合单个网站容器化")])])},[],!1,null,null,null);n.default=r.exports}}]);